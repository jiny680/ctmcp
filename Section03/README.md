# 宣言的プログラミング技法

ある計算操作が宣言的であるとは、同じ引数で呼ばれればいつでも他の計算状況に無関係に同じ結果を返すこと。冪等であるということ。

- 独立で、
- 状態無しで、
- 決定的
  - 同じ引数を与えられれば、常に同じ結果を返す
  - 冪等と何が違う?

### 宣言的プログラミングはなぜ重要か

- **宣言的プログラムは合成的である**:

  - 宣言的プログラムはコンポーネントからできている。
  - コンポーネントは、他のコンポーネントや自身の履歴に無関係に、記述・テスト・正しさの証明ができる

- **宣言的プログラムについての推論は簡単である**:

  - 表現力のあるモデルで書かれたプログラムより推論しやすい
  - 値について計算するだけだから、単純な代数的・論理的推論技術が使える

- コンポーネント component: きちんと定義された入力と出力を持つ、正確に範囲が定められたプログラム片をコンポーネントと定義する。
- 宣言的プログラムにおいて、コンポーネント間の相互作用は、各コンポーネントの入力と出力によって決定される。
- **プログラムを全体を理解するために要する労力は、その宣言的コンポーネントを理解するのに要する労力と、残りを理解するのに要する労力の和に等しい**
  - もっと親密だと複雑になる。そういうのは、8 章の"共有状態をもつ並行的プログラミング"で
- 密接な相互作用は、それを支援していないモデルのもとでも、避けることはできないけど、大事なのは、**必要なときに限って使うこと**。必要がなければ使うべきでない。

### 宣言的プログラムを書くこと

- 「宣言的操作をある規則に従って組み合わせれば、新しい宣言的操作を作ることができる。」
- 「宣言的操作を宣言的モデルの操作に従って組み合わせれば、その結果は宣言的操作となる」

- 「等しいものは等しいもので置き換えることができる」 → **参照透過性 or 参照透明姓(referential transparency)**
- 「プログラミングの基礎」には、「作ったデータは変わることがなく、未来永劫その値を持ち続け」ることとある。違うことのように聞こえる???
- 基本的技法
  - 高階プログラミングを使ってプログラム構造を単純化し、プログラムを再帰的関数定義の集合とみなすこと。
    - 直接再帰
    - 間接再帰
  - 高階プログラミングとは、関数の引数や結果が関数で良いこと。 → 関数の返り値は式じゃないといけないから、関数は式。
  - 宣言的モデルの表現力の乏しさが、高階性によってある程度補われる。
